<!DOCTYPE html>
<html>
<head>
	<title>Code Player</title>

	<meta charset="utf-8" />
	<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="stylesheet" href="styles.css">

 	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  	<!-- jQuery UI -->
  	<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/themes/smoothness/jquery-ui.css" />
  	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/jquery-ui.min.js"></script>

</head>

<body>

	<div id="wrapper">
		<div id="menubar">
			<div id="logo">Code Player</div>
			<div id="runDiv"><input type="submit" class="styled-button-8" value="Run" id="runButton" /></div>
			<ul id="toggles">
				<li class="toggle selected">HTML</li>
				<li class="toggle">CSS</li>
				<li class="toggle">JavaScript</li>
				<li class="toggle selected" style="border:none">Result</li>
			</ul>
		</div>
		<div class="clear"></div> <!-- clear the floats -->

		<!-- conatainers -->
		<div class="codeContainer" id="HTML">
			<div class="label">HTML</div>
			<textarea id="htmlCode"><!DOCTYPE html> </html></textarea>	
		</div>

		<div class="codeContainer" id="CSS">
			<div class="label">CSS</div>
			<textarea id="cssCode">html{ background-color: grey; }</textarea>	
		</div>

		<div class="codeContainer" id="JavaScript">
			<div class="label">JavaScript</div>
			<p id="jsCode">JavaScript disabled due to security reason</p>	
		</div>

		<div class="codeContainer" id="Result">
		<div class="label">Result</div>
			<iframe id="resultFrame"></iframe>
		</div>


		<script type="text/javascript">
			var windowHeight = $(window).height();
			var menuHeight = $("#menubar").height();
			var containerHeight = windowHeight - menuHeight;
			//height of the codeContainer divs = current window height - fixed menu bar height
			$(".codeContainer").height(containerHeight + "px");

			//==============================================
			$(".toggle").click(function(){
				$(this).toggleClass("selected");

				var activeDive = $(this).html();
				$("#" + activeDive).toggle();

				var showingDivs = $(".codeContainer").filter(function(){
					//true if display: none, i.e. div is displaying
					return ($(this).css("display") != "none");
				}).length;

				var width = 100/showingDivs;
				$(".codeContainer").css("width", width + "%");	
			});

			//==============================================
			$("#runButton").click(function() {
				$("iframe").contents().find("html").html("<style>" + $("#cssCode").val() + "</style>" +$("#htmlCode").val());

			});


		</script>
	</div>

	<footer></footer>



</body>
</html>